<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Medical Office Training Notebook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: #f8f9ff; }
    header { background: #006d77; color: #fff; padding: 1rem 2rem; font-size: 2rem; letter-spacing: .03em; font-weight: bold;}
    nav { background: #edf6f9; padding: 0.5rem 2rem; display: flex; flex-wrap: wrap; gap: 0.7rem; }
    nav button { background: #00b4d8; color: #fff; border: none; border-radius: 5px; padding: 0.4rem 1.2rem; margin: 0.1rem; cursor: pointer; transition: background 0.2s;}
    nav button:hover, nav button.active { background: #03045e; }
    main { max-width: 850px; margin: 2rem auto; background: #fff; border-radius: 8px; box-shadow: 0 4px 16px #b5c8e6a1; padding: 2rem; }
    section { display: none; }
    section.active { display: block; }
    h2 { font-size: 1.5rem; font-weight: 600; color: #006d77; margin-bottom: 1rem; border-bottom: 2px solid #e0f2fe; padding-bottom: 0.5rem; }
    .task { background: #f0f4ff; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; border: 1px solid #d0e0ff; }
    .task p { margin: 0.5rem 0; color: #333; }
    .task h3 { font-size: 1.2rem; margin-bottom: 0.5rem; color: #03045e; }
    input[type="text"], input[type="date"], select, textarea { width: 100%; max-width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 5px; margin-top: 0.5rem; box-sizing: border-box; }
    button { background: #48bfe3; color: #fff; border: none; padding: 0.75rem 1.5rem; border-radius: 5px; cursor: pointer; transition: background 0.2s; margin-top: 1rem; }
    button:hover { background: #00b4d8; }
    .feedback { margin-top: 1rem; padding: 0.75rem; border-radius: 5px; background: #e6ffed; color: #2f855a; border: 1px solid #c6f6d5; display: none; }
    .feedback.error { background: #fff5f5; color: #c53030; border: 1px solid #fed7d7; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #e2e8f0; padding: 0.75rem; text-align: left; }
    th { background: #edf2f7; font-weight: 600; }
    progress { width: 100%; max-width: 400px; height: 1rem; }
  </style>
</head>
<body>

<header>EHR Training Notebook</header>
<nav>
  <button data-module="patient" class="active">Patient Registration</button>
  <button data-module="appointment">Scheduling</button>
  <button data-module="documents">Document Management</button>
  <button data-module="labs">Lab Orders & Results</button>
  <button data-module="priorAuth">Prior Authorization</button>
  <button data-module="coding">Coding & Billing</button>
  <button data-module="appeals">Claim Appeals</button>
  <button data-module="career">Career Path Tracker</button>
</nav>
<main>
  <!-- Patient Registration Module -->
  <section id="patient-module" class="active">
    <h2>Patient Registration</h2>
    <div class="task">
      <h3>Task: Register a New Patient</h3>
      <p>Enter the patient's information to create their record in the simulated EHR system. Pay close attention to data accuracy. You must provide a full name, date of birth, phone, and valid insurance.</p>
      <form id="patient-form">
        <label>Full Name: <input type="text" id="patient-name" placeholder="e.g., Jane Doe"></label>
        <label>Date of Birth: <input type="date" id="patient-dob"></label>
        <label>Phone Number: <input type="text" id="patient-phone" placeholder="e.g., 555-123-4567"></label>
        <label>Insurance Provider: <input type="text" id="patient-insurance" placeholder="e.g., Blue Cross Blue Shield"></label>
        <button type="submit">Submit Registration</button>
      </form>
      <div id="patient-feedback" class="feedback"></div>
    </div>
  </section>

  <!-- Appointment Scheduling Module -->
  <section id="appointment-module">
    <h2>Appointment Scheduling</h2>
    <div class="task">
      <h3>Task: Schedule a Patient Appointment</h3>
      <p>Schedule an appointment for the patient you just registered. The appointment is for a follow-up visit with Dr. Miller. Select a date and time and then submit.</p>
      <form id="appointment-form">
        <label>Patient Name: <input type="text" id="appt-patient-name" placeholder="Start typing..."></label>
        <label>Appointment Date: <input type="date" id="appt-date"></label>
        <label>Provider:
          <select id="appt-provider">
            <option value="">-- Select Provider --</option>
            <option value="Dr. Miller">Dr. Miller</option>
            <option value="Dr. Chen">Dr. Chen</option>
            <option value="Dr. Patel">Dr. Patel</option>
          </select>
        </label>
        <button type="submit">Schedule Appointment</button>
      </form>
      <div id="appointment-feedback" class="feedback"></div>
    </div>
    <h3>Scheduled Appointments</h3>
    <table id="appointment-table">
      <thead>
        <tr><th>Patient</th><th>Date</th><th>Provider</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Document Management Module -->
  <section id="documents-module">
    <h2>Document Management</h2>
    <div class="task">
      <h3>Task: Upload a document for an existing patient</h3>
      <p>Simulate uploading a document by entering a filename for a referral letter for a new patient visit.</p>
      <form id="documents-form">
        <label>Patient Name: <input type="text" id="doc-patient-name" placeholder="e.g., John Smith"></label>
        <label>Document Name: <input type="text" id="doc-name" placeholder="e.g., Referral_Cardiology.pdf"></label>
        <button type="submit">Upload Document</button>
      </form>
      <div id="documents-feedback" class="feedback"></div>
    </div>
    <h3>Patient Documents</h3>
    <table id="documents-table">
      <thead>
        <tr><th>Patient</th><th>Document</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Lab Orders & Results Module -->
  <section id="labs-module">
    <h2>Lab Orders & Results</h2>
    <div class="task">
      <h3>Task: Order a lab for a patient</h3>
      <p>Simulate a lab order for a patient. Select the patient and the lab test, then view the results.</p>
      <form id="labs-form">
        <label>Patient Name: <input type="text" id="lab-patient-name" placeholder="e.g., Jane Doe"></label>
        <label>Lab Test:
          <select id="lab-test">
            <option value="">-- Select Lab Test --</option>
            <option value="CBC">Complete Blood Count (CBC)</option>
            <option value="Lipid">Lipid Panel</option>
            <option value="CMP">Comprehensive Metabolic Panel (CMP)</option>
          </select>
        </label>
        <button type="button" id="view-lab-results-btn">View Lab Results</button>
      </form>
      <div id="labs-feedback" class="feedback"></div>
    </div>
    <div id="lab-results-display" class="task" style="display:none;">
      <h3>Lab Results for <span id="lab-results-patient"></span></h3>
      <div id="lab-results-content"></div>
    </div>
  </section>

  <!-- Prior Authorization Module -->
  <section id="priorAuth-module">
    <h2>Prior Authorization</h2>
    <div class="task">
      <h3>Task: Submit a Prior Authorization Request</h3>
      <p>Submit a prior authorization request for a medication. Enter the patient's information and the medication name. A successful submission requires a valid patient name and medication.</p>
      <form id="priorAuth-form">
        <label>Patient Name: <input type="text" id="pa-patient-name" placeholder="e.g., John Smith"></label>
        <label>Medication: <input type="text" id="pa-medication" placeholder="e.g., Humira"></label>
        <button type="submit">Submit Request</button>
      </form>
      <div id="priorAuth-feedback" class="feedback"></div>
    </div>
  </section>

  <!-- Coding & Billing Module -->
  <section id="coding-module">
    <h2>Coding & Billing</h2>
    <div class="task">
      <h3>Task: Assign CPT and ICD-10 codes for a visit</h3>
      <p>Based on the scenario, assign the correct codes. The scenario is: a new patient visit for a sore throat (strep). A code is considered valid if it's a 5-digit number for CPT and a string for ICD.</p>
      <form id="coding-form">
        <label>CPT Code: <input type="text" id="cpt-code" placeholder="e.g., 99203"></label>
        <label>ICD-10 Code: <input type="text" id="icd-code" placeholder="e.g., J02.0"></label>
        <button type="submit">Submit Codes</button>
      </form>
      <div id="coding-feedback" class="feedback"></div>
    </div>
  </section>

  <!-- Claim Appeals Module -->
  <section id="appeals-module">
    <h2>Claim Appeals</h2>
    <div class="task">
      <h3>Task: Appeal a Denied Claim</h3>
      <p>A claim was denied because the patient was not eligible. Appeal the denial by providing the correct patient information. You must enter a valid patient name and a corrected member ID.</p>
      <form id="appeals-form">
        <label>Denied Patient Name: <input type="text" id="appeal-patient-name" placeholder="e.g., Jane Doe"></label>
        <label>Correct Member ID: <input type="text" id="appeal-member-id" placeholder="e.g., X12345Y"></label>
        <button type="submit">Submit Appeal</button>
      </form>
      <div id="appeals-feedback" class="feedback"></div>
    </div>
  </section>

  <!-- Career Path Tracker Module -->
  <section id="career-module">
    <h2>Career Path Tracker</h2>
    <p class="mb-4">Track your progress through the training modules. Completing a module will update the tracker and unlock new milestones.</p>
    <div class="task">
      <h3>Your Progress</h3>
      <progress id="career-progress" value="0" max="7"></progress>
      <p><span id="progress-text">0</span> of 7 modules completed</p>
    </div>
    <div class="task">
      <h3>Module Status</h3>
      <ul id="module-status-list"></ul>
    </div>
    <div class="task">
      <h3>Milestones & Certifications</h3>
      <ul id="milestone-list"></ul>
    </div>
  </section>

</main>

<script>
  // --- STATE MANAGEMENT ---
  let appState = {
    patients: [],
    appointments: [],
    documents: [],
    labOrders: [],
    priorAuths: [],
    codingSubmissions: [],
    appeals: [],
    completedModules: new Set()
  };

  // --- MODULE NAVIGATION LOGIC ---
  const navButtons = document.querySelectorAll('nav button');
  const sections = document.querySelectorAll('main section');
  navButtons.forEach(button => {
    button.addEventListener('click', () => {
      navButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      sections.forEach(section => section.classList.remove('active'));
      document.getElementById(button.getAttribute('data-module') + '-module').classList.add('active');
    });
  });

  // --- FORM SUBMISSION HANDLERS ---
  document.getElementById('patient-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('patient-name').value.trim();
    const dob = document.getElementById('patient-dob').value;
    const phone = document.getElementById('patient-phone').value.trim();
    const insurance = document.getElementById('patient-insurance').value.trim();
    if (name && dob && phone && insurance) {
      appState.patients.push({ name, dob, phone, insurance });
      feedback('patient-feedback', '✅ Patient registered successfully!', false);
      this.reset();
      updateProgress('patient');
    } else {
      feedback('patient-feedback', '⚠️ Please fill out all fields.', true);
    }
  });

  document.getElementById('appointment-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const patientName = document.getElementById('appt-patient-name').value.trim();
    const apptDate = document.getElementById('appt-date').value;
    const provider = document.getElementById('appt-provider').value;
    if (patientName && apptDate && provider) {
      const patientExists = appState.patients.some(p => p.name.toLowerCase() === patientName.toLowerCase());
      if (patientExists) {
        appState.appointments.push({ patientName, apptDate, provider });
        feedback('appointment-feedback', '✅ Appointment scheduled successfully!', false);
        this.reset();
        updateAppointmentTable();
        updateProgress('appointment');
      } else {
        feedback('appointment-feedback', '⚠️ Patient not found. Please register the patient first.', true);
      }
    } else {
      feedback('appointment-feedback', '⚠️ Please fill out all fields.', true);
    }
  });

  document.getElementById('documents-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const patientName = document.getElementById('doc-patient-name').value.trim();
    const docName = document.getElementById('doc-name').value.trim();
    if (patientName && docName) {
      const patientExists = appState.patients.some(p => p.name.toLowerCase() === patientName.toLowerCase());
      if (patientExists) {
        appState.documents.push({ patientName, docName });
        feedback('documents-feedback', '✅ Document uploaded successfully!', false);
        this.reset();
        updateDocumentsTable();
        updateProgress('documents');
      } else {
        feedback('documents-feedback', '⚠️ Patient not found. Please register the patient first.', true);
      }
    } else {
      feedback('documents-feedback', '⚠️ Please enter a patient name and document name.', true);
    }
  });

  document.getElementById('view-lab-results-btn').addEventListener('click', () => {
    const patientName = document.getElementById('lab-patient-name').value.trim();
    const test = document.getElementById('lab-test').value;
    if (patientName && test) {
      const patientExists = appState.patients.some(p => p.name.toLowerCase() === patientName.toLowerCase());
      if (patientExists) {
        const resultsDisplay = document.getElementById('lab-results-display');
        const resultsContent = document.getElementById('lab-results-content');
        const patientNameSpan = document.getElementById('lab-results-patient');
        patientNameSpan.textContent = patientName;
        resultsDisplay.style.display = 'block';

        let resultText = `<strong>${test} Results:</strong><br>`;
        if (test === 'CBC') {
          resultText += 'WBC: 7.5 K/uL (Normal)<br>RBC: 4.8 M/uL (Normal)';
        } else if (test === 'Lipid') {
          resultText += 'Total Cholesterol: 180 mg/dL (Normal)<br>LDL: 105 mg/dL (Normal)';
        } else if (test === 'CMP') {
          resultText += 'Glucose: 95 mg/dL (Normal)<br>Sodium: 140 mEq/L (Normal)';
        }
        resultsContent.innerHTML = resultText;
        feedback('labs-feedback', '✅ Lab results retrieved.', false);
        document.getElementById('labs-form').reset();
        updateProgress('labs');
      } else {
        feedback('labs-feedback', '⚠️ Patient not found. Please register the patient first.', true);
      }
    } else {
      feedback('labs-feedback', '⚠️ Please select a patient and lab test.', true);
    }
  });

  document.getElementById('priorAuth-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const patientName = document.getElementById('pa-patient-name').value.trim();
    const medication = document.getElementById('pa-medication').value.trim();
    if (patientName && medication) {
      const patientExists = appState.patients.some(p => p.name.toLowerCase() === patientName.toLowerCase());
      if (patientExists) {
        appState.priorAuths.push({ patientName, medication, status: 'Submitted' });
        feedback('priorAuth-feedback', '✅ Prior authorization request submitted!', false);
        this.reset();
        updateProgress('priorAuth');
      } else {
        feedback('priorAuth-feedback', '⚠️ Patient not found. Please register the patient first.', true);
      }
    } else {
      feedback('priorAuth-feedback', '⚠️ Please fill out all fields.', true);
    }
  });

  document.getElementById('coding-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const cptCode = document.getElementById('cpt-code').value.trim();
    const icdCode = document.getElementById('icd-code').value.trim();
    const isCPTValid = /^\d{5}$/.test(cptCode) && cptCode === '99213';
    const isICDValid = /^[A-Z]\d{2}(\.\d{1,2})?$/.test(icdCode) && icdCode === 'J02.0';

    if (isCPTValid && isICDValid) {
      appState.codingSubmissions.push({ cpt: cptCode, icd: icdCode, status: 'Correct' });
      feedback('coding-feedback', '✅ Codes submitted successfully! Both codes are correct for the scenario.', false);
      this.reset();
      updateProgress('coding');
    } else {
      const msg = !isCPTValid ? '⚠️ Incorrect CPT Code. (Hint: 99213)' : '⚠️ Incorrect ICD-10 Code. (Hint: J02.0)';
      appState.codingSubmissions.push({ cpt: cptCode, icd: icdCode, status: 'Incorrect' });
      feedback('coding-feedback', msg, true);
    }
  });

  document.getElementById('appeals-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const patientName = document.getElementById('appeal-patient-name').value.trim();
    const memberId = document.getElementById('appeal-member-id').value.trim();
    if (patientName && memberId) {
      const patientExists = appState.patients.some(p => p.name.toLowerCase() === patientName.toLowerCase());
      if (patientExists && memberId === 'X12345Y') { // Corrected Member ID from prior training
        appState.appeals.push({ patientName, memberId, status: 'Successful' });
        feedback('appeals-feedback', '✅ Claim appeal submitted successfully! Patient eligibility corrected.', false);
        this.reset();
        updateProgress('appeals');
      } else {
        feedback('appeals-feedback', '⚠️ Appeal failed. Either the patient was not found or the member ID is incorrect.', true);
      }
    } else {
      feedback('appeals-feedback', '⚠️ Please fill out all fields.', true);
    }
  });

  // --- UI UPDATES ---
  function updateAppointmentTable() {
    const tbody = document.getElementById('appointment-table').querySelector('tbody');
    tbody.innerHTML = '';
    appState.appointments.forEach(appt => {
      const row = document.createElement('tr');
      row.innerHTML = `<td>${appt.patientName}</td><td>${appt.apptDate}</td><td>${appt.provider}</td>`;
      tbody.appendChild(row);
    });
  }

  function updateDocumentsTable() {
    const tbody = document.getElementById('documents-table').querySelector('tbody');
    tbody.innerHTML = '';
    appState.documents.forEach(doc => {
      const row = document.createElement('tr');
      row.innerHTML = `<td>${doc.patientName}</td><td>${doc.docName}</td>`;
      tbody.appendChild(row);
    });
  }

  function updateProgress(moduleName) {
    appState.completedModules.add(moduleName);
    const completedCount = appState.completedModules.size;
    const totalModules = 7;
    const progressEl = document.getElementById('career-progress');
    progressEl.value = completedCount;
    progressEl.max = totalModules;
    document.getElementById('progress-text').textContent = completedCount;

    const moduleStatusList = document.getElementById('module-status-list');
    moduleStatusList.innerHTML = '';
    const modules = ['patient', 'appointment', 'documents', 'labs', 'priorAuth', 'coding', 'appeals'];
    modules.forEach(mod => {
      const isCompleted = appState.completedModules.has(mod);
      const listItem = document.createElement('li');
      listItem.innerHTML = `${isCompleted ? '✅' : '⏳'} ${mod.charAt(0).toUpperCase() + mod.slice(1)} Module`;
      moduleStatusList.appendChild(listItem);
    });

    const milestoneList = document.getElementById('milestone-list');
    if (completedCount >= 3 && !document.getElementById('milestone-badge-1')) {
      milestoneList.innerHTML += '<li id="milestone-badge-1">🏅 Office Assistant Pro</li>';
    }
    if (completedCount >= 5 && !document.getElementById('milestone-badge-2')) {
      milestoneList.innerHTML += '<li id="milestone-badge-2">🏆 EHR Master</li>';
    }
    if (completedCount === totalModules && !document.getElementById('final-milestone')) {
      milestoneList.innerHTML += '<li id="final-milestone">🚀 Certified Medical Office Professional</li>';
    }
  }

  function feedback(elementId, message, isError) {
    const feedbackEl = document.getElementById(elementId);
    feedbackEl.textContent = message;
    feedbackEl.style.display = 'block';
    if (isError) {
      feedbackEl.classList.add('error');
    } else {
      feedbackEl.classList.remove('error');
    }
    setTimeout(() => {
      feedbackEl.style.display = 'none';
    }, 3000);
  }

  // Initial load
  updateProgress();
</script>

</body>
</html>
