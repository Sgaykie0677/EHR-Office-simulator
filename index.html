<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EHR Medical Office Simulator</title>
    <!-- Use Tailwind CSS for a modern, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }
        .app-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 900px;
            padding: 2rem;
            display: flex;
            flex-direction: row;
        }
        .sidebar {
            width: 250px;
            border-right: 2px solid #e5e7eb;
            padding-right: 1.5rem;
        }
        .sidebar-btn {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            font-weight: 500;
            color: #4b5563;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }
        .sidebar-btn:hover {
            background-color: #e5e7eb;
            color: #1f2937;
        }
        .sidebar-btn.active {
            background-color: #dbeafe;
            color: #2563eb;
            font-weight: 600;
        }
        .sidebar-btn-icon {
            width: 20px;
            height: 20px;
            margin-right: 0.75rem;
        }
        .content-area {
            flex-grow: 1;
            padding-left: 2rem;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .card {
            background-color: #f9fafb;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        /* Styling for the quiz section */
        .question-box {
            background-color: #f9fafb;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }
        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }
        .answer-btn {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background-color: white;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            text-align: left;
        }
        .answer-btn:hover {
            background-color: #e5e7eb;
        }
        .answer-btn.correct {
            background-color: #d1fae5;
            border-color: #10b981;
            font-weight: 600;
            pointer-events: none;
        }
        .answer-btn.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
            font-weight: 600;
            pointer-events: none;
        }
        .feedback {
            font-size: 1rem;
            font-weight: 500;
            margin-top: 1rem;
            min-height: 1.5rem;
        }
        .navigation-btns {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }
        button {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        /* Claim Scrubbing Styles */
        .claim-container {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        .claim-field {
            margin-bottom: 1rem;
        }
        .claim-field label {
            font-weight: 600;
            color: #4a5568;
            display: block;
            margin-bottom: 0.5rem;
        }
        .claim-field input, .claim-field select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
        }
        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 font-sans">

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <h1 class="text-xl font-bold text-gray-800 mb-4">EHR Simulator</h1>
            <nav class="flex flex-col">
                <button class="sidebar-btn active" data-tab="dashboard">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="9"></rect>
                        <rect x="14" y="3" width="7" height="5"></rect>
                        <rect x="14" y="12" width="7" height="9"></rect>
                        <rect x="3" y="16" width="7" height="5"></rect>
                    </svg>
                    Dashboard
                </button>
                <button class="sidebar-btn" data-tab="patient-chart">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    Patient Chart
                </button>
                <button class="sidebar-btn" data-tab="scheduling">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Scheduling
                </button>
                <button class="sidebar-btn" data-tab="coding">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="16 18 22 12 16 6"></polyline>
                        <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                    Coding
                </button>
                <button class="sidebar-btn" data-tab="billing">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12V7H3v5c0 1.66 1.34 3 3 3h12a3 3 0 0 0 3-3z"></path>
                        <path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v2H3V5z"></path>
                        <circle cx="9" cy="18" r="2"></circle>
                        <circle cx="15" cy="18" r="2"></circle>
                    </svg>
                    Billing & Payments
                </button>
                <button class="sidebar-btn" data-tab="prior-auth">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                        <path d="M2 17l10 5 10-5"></path>
                        <path d="M2 12l10 5 10-5"></path>
                    </svg>
                    Prior Auth
                </button>
                <button class="sidebar-btn" data-tab="claims">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    Claim Forms
                </button>
                <button class="sidebar-btn" data-tab="quiz">
                    <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    Quiz
                </button>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- Dashboard Content -->
            <div id="dashboard" class="tab-content active">
                <h2 class="text-2xl font-bold mb-4">Dashboard</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="card">
                        <h3 class="text-lg font-semibold text-gray-700">Today's Appointments</h3>
                        <p class="text-4xl font-bold text-green-500 mt-2">2</p>
                        <p class="text-sm text-gray-500">patients scheduled</p>
                    </div>
                    <div class="card">
                        <h3 class="text-lg font-semibold text-gray-700">Pending Tasks</h3>
                        <p class="text-4xl font-bold text-blue-500 mt-2">0</p>
                        <p class="text-sm text-gray-500">new assignments</p>
                    </div>
                    <div class="card">
                        <h3 class="text-lg font-semibold text-gray-700">Unscrubbed Claims</h3>
                        <p class="text-4xl font-bold text-red-500 mt-2">0</p>
                        <p class="text-sm text-gray-500">claims to review</p>
                    </div>
                </div>
                <p class="mt-8 text-gray-600">Use the sidebar to begin practicing different tasks in a medical office.</p>
            </div>

            <!-- Patient Chart Content -->
            <div id="patient-chart" class="tab-content">
                <h2 class="text-2xl font-bold mb-4">Patient Chart</h2>
                <p class="text-gray-600">This section would simulate a patient's electronic health record. You can view demographic information, medical history, lab results, and vitals.</p>
                <div class="mt-6 p-4 bg-gray-100 rounded-lg">
                    <h3 class="font-semibold text-lg">Example Patient: Jane Doe</h3>
                    <p class="text-sm text-gray-600">DOB: 01/15/1990</p>
                    <p class="text-sm text-gray-600">Allergies: Penicillin</p>
                    <p class="text-sm text-gray-600">Diagnosis: Essential Hypertension (I10)</p>
                </div>
            </div>

            <!-- Scheduling Content -->
            <div id="scheduling" class="tab-content">
                <h2 class="text-2xl font-bold mb-4">Scheduling</h2>
                <p class="text-gray-600">This section simulates an office calendar. You can practice booking, rescheduling, and canceling appointments.</p>
                <div class="mt-6 p-4 bg-gray-100 rounded-lg">
                    <h3 class="font-semibold text-lg">Today's Schedule</h3>
                    <ul class="list-disc list-inside mt-2 text-gray-700">
                        <li>9:00 AM - John Smith (New Patient)</li>
                        <li>9:30 AM - Jane Doe (Follow-up)</li>
                    </ul>
                </div>
            </div>

            <!-- Coding Content -->
            <div id="coding" class="tab-content">
                <h2 class="text-2xl font-bold text-center mb-6">Medical Code Encoder</h2>
                <p class="text-gray-600 text-center mb-4">Search for a diagnosis or procedure to find its corresponding code. Practice identifying the right codes for clinical scenarios.</p>
                <div class="flex w-full gap-4">
                    <input type="text" id="searchInput" class="flex-grow p-3 border border-gray-300 rounded-lg" placeholder="Enter a diagnosis or procedure...">
                    <button id="searchButton" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Search</button>
                </div>
                <div id="results" class="mt-6">
                    <!-- Results will be displayed here -->
                </div>
            </div>

            <!-- Billing & Payments Content -->
            <div id="billing" class="tab-content">
                <h2 class="text-2xl font-bold mb-4">Billing & Payments</h2>
                <p class="text-gray-600">This section allows you to practice calculating patient balances and processing payments based on insurance coverage and deductibles.</p>
                <div class="mt-6 p-4 bg-gray-100 rounded-lg">
                    <h3 class="font-semibold text-lg mb-2">Patient Balance Calculator</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="total-charge" class="block text-sm font-medium text-gray-700">Total Charge ($)</label>
                            <input type="number" id="total-charge" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                        </div>
                        <div>
                            <label for="insurance-payment" class="block text-sm font-medium text-gray-700">Insurance Payment ($)</label>
                            <input type="number" id="insurance-payment" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label for="copay-deductible" class="block text-sm font-medium text-gray-700">Co-pay/Deductible ($)</label>
                        <input type="number" id="copay-deductible" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                    </div>
                    <button id="calculate-balance-btn" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">
                        Calculate Balance
                    </button>
                    <div class="mt-4 text-lg font-semibold">
                        Patient Balance: <span id="patient-balance-result" class="text-red-500">$0.00</span>
                    </div>
                </div>
            </div>

            <!-- Prior Auth Content -->
            <div id="prior-auth" class="tab-content">
                <h2 class="text-2xl font-bold mb-4">Prior Authorization</h2>
                <p class="text-gray-600">This section simulates the process of submitting a request for prior authorization for a medical procedure or medication.</p>
                <div class="mt-6 p-4 bg-gray-100 rounded-lg">
                    <h3 class="font-semibold text-lg mb-2">Request Prior Auth</h3>
                    <form id="prior-auth-form">
                        <div class="mb-4">
                            <label for="procedure-code" class="block text-sm font-medium text-gray-700">Procedure Code (CPT)</label>
                            <input type="text" id="procedure-code" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                        </div>
                        <div class="mb-4">
                            <label for="diagnosis-code" class="block text-sm font-medium text-gray-700">Diagnosis Code (ICD-10)</label>
                            <input type="text" id="diagnosis-code" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                        </div>
                        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">Submit Request</button>
                    </form>
                    <div id="prior-auth-result" class="mt-4 font-semibold"></div>
                </div>
            </div>

            <!-- Claim Forms Content -->
            <div id="claims" class="tab-content">
                <h2 class="text-2xl font-bold mb-4">Claim Forms</h2>
                <p class="text-gray-600">This section provides an overview of the two primary claim forms: UB-04 and CMS-1500.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div class="card">
                        <h3 class="text-lg font-semibold text-gray-700">CMS-1500</h3>
                        <p class="text-sm text-gray-600 mt-2">Used for billing outpatient services, such as those provided in a physician's office or clinic. This form is used for professional billing.</p>
                    </div>
                    <div class="card">
                        <h3 class="text-lg font-semibold text-gray-700">UB-04</h3>
                        <p class="text-sm text-gray-600 mt-2">Used for billing institutional services, such as those provided by hospitals, skilled nursing facilities, or home health agencies. This form is used for institutional billing.</p>
                    </div>
                </div>
            </div>

            <!-- Quiz Content -->
            <div id="quiz" class="tab-content text-center">
                <h2 class="text-2xl font-bold mb-6">Medical Coding Quiz</h2>
                <div id="quiz-area">
                    <div class="question-box">
                        <p class="question-text" id="question-text"></p>
                        <div id="answers-container"></div>
                    </div>
                    <div id="feedback-message" class="feedback"></div>
                </div>

                <div class="navigation-btns">
                    <button id="prev-btn" disabled>Previous</button>
                    <button id="next-btn" disabled>Next</button>
                </div>

                <div id="results-area" class="mt-8 hidden">
                    <h3 class="text-xl font-bold mb-4">Quiz Complete!</h3>
                    <p class="text-lg">You scored: <span id="score-display">0</span> / <span id="total-questions">0</span></p>
                    <button class="mt-4" onclick="window.location.reload();">Retake Quiz</button>
                </div>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Tab Switching Logic ---
            const sidebarButtons = document.querySelectorAll('.sidebar-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            function showTab(tabId) {
                sidebarButtons.forEach(button => {
                    button.classList.remove('active');
                });
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });

                document.querySelector(`.sidebar-btn[data-tab="${tabId}"]`).classList.add('active');
                document.getElementById(tabId).classList.add('active');
            }

            sidebarButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showTab(button.getAttribute('data-tab'));
                });
            });

            // --- Medical Code Encoder Logic ---
            const medicalCodes = [
                { term: "appendicitis", code: "K37" },
                { term: "fracture of ankle", code: "S82.84" },
                { term: "migraine with aura", code: "G43.109" },
                { term: "bacterial pneumonia", code: "J15.9" },
                { term: "type 2 diabetes mellitus", code: "E11.9" },
                { term: "sore throat", code: "J02.9" },
                { term: "chest pain", code: "R07.9" },
                { term: "influenza with pneumonia", code: "J10.0" },
                { term: "acute sinusitis", code: "J01.90" },
                { term: "urinary tract infection", code: "N39.0" },
                { term: "complete blood count", code: "85025" },
                { term: "x-ray of chest", code: "71045" },
                { term: "colonoscopy, diagnostic", code: "45378" },
                { term: "office visit, new patient, low complexity", code: "99202" },
                { term: "office visit, established patient, moderate complexity", code: "99214" }
            ];

            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const resultsContainer = document.getElementById('results');

            function performSearch() {
                const query = searchInput.value.toLowerCase().trim();
                resultsContainer.innerHTML = '';
                if (query === "") return;

                const filteredCodes = medicalCodes.filter(item => item.term.toLowerCase().includes(query));

                if (filteredCodes.length > 0) {
                    filteredCodes.forEach(item => {
                        const resultItem = document.createElement('div');
                        resultItem.classList.add('result-item', 'flex', 'justify-between', 'items-center', 'p-4', 'mb-2', 'bg-gray-50', 'rounded-lg');
                        resultItem.innerHTML = `<span class="font-semibold text-gray-800">${item.term}</span><span class="bg-gray-200 text-gray-800 text-sm px-3 py-1 rounded-full">${item.code}</span>`;
                        resultsContainer.appendChild(resultItem);
                    });
                } else {
                    resultsContainer.innerHTML = `<p class="text-center text-gray-500 italic mt-4">No codes found for "${query}". Try a different term.</p>`;
                }
            }

            if (searchButton) {
                searchButton.addEventListener('click', performSearch);
            }
            if (searchInput) {
                searchInput.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter') {
                        performSearch();
                    }
                });
            }

            // --- Billing Calculator Logic ---
            const calculateBtn = document.getElementById('calculate-balance-btn');
            const totalChargeInput = document.getElementById('total-charge');
            const insurancePaymentInput = document.getElementById('insurance-payment');
            const copayDeductibleInput = document.getElementById('copay-deductible');
            const patientBalanceResult = document.getElementById('patient-balance-result');

            function calculateBalance() {
                const totalCharge = parseFloat(totalChargeInput.value) || 0;
                const insurancePayment = parseFloat(insurancePaymentInput.value) || 0;
                const copayDeductible = parseFloat(copayDeductibleInput.value) || 0;

                const balance = totalCharge - insurancePayment - copayDeductible;
                patientBalanceResult.textContent = `$${balance.toFixed(2)}`;
            }

            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateBalance);
            }

            // --- Prior Auth Logic ---
            const priorAuthForm = document.getElementById('prior-auth-form');
            const priorAuthResult = document.getElementById('prior-auth-result');

            if (priorAuthForm) {
                priorAuthForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const procedureCode = document.getElementById('procedure-code').value;
                    const diagnosisCode = document.getElementById('diagnosis-code').value;
                    
                    let message = '';
                    let color = '';

                    if (procedureCode.trim() === '' || diagnosisCode.trim() === '') {
                        message = 'Please enter both a procedure and a diagnosis code.';
                        color = '#dc2626'; // Red
                    } else if (procedureCode.includes('992') || diagnosisCode.includes('R07')) {
                        message = 'Authorization Approved. No further action needed.';
                        color = '#10b981'; // Green
                    } else {
                        message = 'Authorization Pending. Please contact the insurance provider.';
                        color = '#f59e0b'; // Yellow
                    }

                    priorAuthResult.textContent = message;
                    priorAuthResult.style.color = color;
                });
            }

            // --- Quiz Logic ---
            const quizData = [
                // Medical Coding Quiz
                {
                    question: "A patient presents with a laceration on their left arm that requires simple repair. The physician closes the wound with sutures, and the total length of the repair is 4.5 cm. What is the correct CPT code for this procedure?",
                    answers: ["12032", "12002", "12034", "12001"],
                    correct: "12002",
                    rationale: "This is the correct code for a simple repair of a laceration of 2.6 cm to 7.5 cm on the scalp, neck, axillae, external genitalia, trunk and/or extremities."
                },
                {
                    question: "A 55-year-old male is diagnosed with essential hypertension, but has no other complications. Which of the following ICD-10-CM codes is most appropriate for this diagnosis?",
                    answers: ["I10", "I11.0", "I12.9", "I15.0"],
                    correct: "I10",
                    rationale: "This is the correct code for essential (primary) hypertension, which is a common and uncomplicated diagnosis."
                },
                {
                    question: "A patient receives a routine flu shot (influenza virus vaccine). What is the correct HCPCS Level II code for the vaccine product itself, not the administration?",
                    answers: ["90471", "G0008", "J3420", "G8411"],
                    correct: "G8411",
                    rationale: "This is the correct HCPCS code for the influenza virus vaccine (Fluarix Quadrivalent)."
                },
                {
                    question: "A patient is seen for a new patient office visit that involves a low complexity medical decision making and takes 20 minutes. The physician completes a comprehensive history and a comprehensive examination. What is the appropriate CPT code for this visit?",
                    answers: ["99213", "99202", "99203", "99204"],
                    correct: "99202",
                    rationale: "This code is for a new patient visit that is low complexity medical decision making and is based on time of 20 minutes."
                },
                {
                    question: "A patient with a history of heart failure with a known diagnosis of congestive heart failure is seen by a cardiologist. What is the correct ICD-10-CM code for the patient's diagnosis?",
                    answers: ["I50.9", "I50.20", "I50.30", "I50.84"],
                    correct: "I50.9",
                    rationale: "When the specific type of heart failure is not documented, the unspecified code is typically used."
                },
                {
                    question: "A patient has a complete blood count (CBC) with automated differential. What is the correct CPT code for this lab test?",
                    answers: ["85025", "85027", "85022", "85004"],
                    correct: "85025",
                    rationale: "This is the correct code for a complete blood count (CBC) with automated differential."
                },
                {
                    question: "A patient undergoes a magnetic resonance imaging (MRI) of the brain without contrast. What is the correct CPT code for this procedure?",
                    answers: ["70551", "70552", "70553", "70540"],
                    correct: "70551",
                    rationale: "This is the correct code for an MRI of the brain without contrast."
                },
                {
                    question: "A patient with a broken ankle is seen in the emergency room. The physician determines that the fracture is a displaced fracture of the lateral malleolus. What is the correct ICD-10-CM code for this diagnosis?",
                    answers: ["S82.69XA", "S82.62XA", "S82.61XA", "S82.51XA"],
                    correct: "S82.62XA",
                    rationale: "This is the correct code for a displaced fracture of the lateral malleolus of the left tibia, initial encounter for closed fracture."
                },
                {
                    question: "A patient receives an injection of a drug not otherwise specified. What is the most appropriate HCPCS Level II code for this injection administration, not the medication itself?",
                    answers: ["G0391", "J3490", "96372", "G0402"],
                    correct: "J3490",
                    rationale: "This is a correct HCPCS code for a drug not otherwise specified, which is used for the medication itself, not the administration."
                },
                {
                    question: "A patient has a complete, bilateral mammogram for breast cancer screening. What is the correct CPT code for this procedure?",
                    answers: ["77067", "77066", "77065", "77061"],
                    correct: "77067",
                    rationale: "This is the correct code for a screening mammogram, bilateral."
                },
                // Medical Office & EHR Quiz
                {
                    question: "During patient registration, which of the following is the most critical piece of information to verify for accurate billing?",
                    answers: ["The patient's preferred contact method.", "The patient's insurance policy number and effective date.", "The patient's emergency contact information.", "The patient's date of birth and social security number."],
                    correct: "The patient's insurance policy number and effective date.",
                    rationale: "Verifying the insurance policy number and its effective date is crucial for ensuring that the patient's services are covered and for accurate claims submission."
                },
                {
                    question: "Which of the following is a primary purpose of clinical charting in an EHR?",
                    answers: ["To create a record of patient visits for the front desk staff.", "To provide a financial record for billing and coding purposes.", "To serve as a legal document of the patient's medical history and treatment plan.", "To track a patient's exercise and dietary habits."],
                    correct: "To serve as a legal document of the patient's medical history and treatment plan.",
                    rationale: "Clinical charts are a legal document that provides a comprehensive record of the patient's medical history, diagnoses, and treatment plan."
                },
                {
                    question: "What does the abbreviation 'CPT' stand for in the context of medical coding?",
                    answers: ["Certified Patient Technician", "Current Patient Treatment", "Current Procedural Terminology", "Clinical Protocol Terminology"],
                    correct: "Current Procedural Terminology",
                    rationale: "CPT codes are a set of codes used to describe medical, surgical, and diagnostic services provided by physicians and other healthcare professionals."
                },
                {
                    question: "Which of the following is a key administrative task handled by the front office staff?",
                    answers: ["Performing diagnostic tests.", "Developing a patient's treatment plan.", "Scheduling patient appointments and managing the flow of the clinic.", "Prescribing medications."],
                    correct: "Scheduling patient appointments and managing the flow of the clinic.",
                    rationale: "Scheduling appointments and managing the flow of the clinic are core administrative responsibilities of the front office staff."
                },
                {
                    question: "According to HIPAA, which of the following is considered a 'covered entity'?",
                    answers: ["A patient's family member.", "A public library.", "A healthcare provider, such as a doctor's office or clinic.", "A non-medical retail store."],
                    correct: "A healthcare provider, such as a doctor's office or clinic.",
                    rationale: "A healthcare provider is considered a 'covered entity' under HIPAA because they handle protected health information (PHI)."
                },
                {
                    question: "What is the primary role of a medical biller?",
                    answers: ["To perform clinical examinations on patients.", "To assign diagnostic and procedural codes to patient encounters.", "To process and submit claims to insurance companies for reimbursement.", "To schedule appointments and manage the front desk."],
                    correct: "To process and submit claims to insurance companies for reimbursement.",
                    rationale: "The primary role of a medical biller is to handle the financial side of healthcare by processing and submitting claims to insurance companies."
                },
                {
                    question: "Which of the following would be an example of a HIPAA violation?",
                    answers: ["A nurse discusses a patient's diagnosis with a colleague who is also involved in the patient's care.", "A receptionist posts a photo of a patient's medical chart on social media.", "A patient requests and receives a copy of their own medical records.", "A doctor uses a patient's name and age for a case study with their permission."],
                    correct: "A receptionist posts a photo of a patient's medical chart on social media.",
                    rationale: "Sharing any patient information, especially on a public platform like social media, is a clear violation of HIPAA rules regarding the protection of protected health information (PHI)."
                }
            ];
            
            let currentQuestionIndex = 0;
            let score = 0;
            const answeredQuestions = new Set();
            
            const questionTextElement = document.getElementById('question-text');
            const answersContainer = document.getElementById('answers-container');
            const feedbackMessage = document.getElementById('feedback-message');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const quizArea = document.getElementById('quiz-area');
            const resultsArea = document.getElementById('results-area');
            const scoreDisplay = document.getElementById('score-display');
            const totalQuestions = document.getElementById('total-questions');
            
            function loadQuestion() {
                if (currentQuestionIndex < quizData.length) {
                    const currentQuestion = quizData[currentQuestionIndex];
                    questionTextElement.textContent = currentQuestion.question;
                    answersContainer.innerHTML = '';
                    feedbackMessage.textContent = '';
                    nextBtn.disabled = !answeredQuestions.has(currentQuestionIndex) && currentQuestionIndex < quizData.length - 1;
                    prevBtn.disabled = currentQuestionIndex === 0;

                    const allAnswers = [...currentQuestion.answers];

                    // Shuffle the answers
                    for (let i = allAnswers.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [allAnswers[i], allAnswers[j]] = [allAnswers[j], allAnswers[i]];
                    }

                    allAnswers.forEach(answer => {
                        const button = document.createElement('button');
                        button.textContent = answer;
                        button.classList.add('answer-btn');
                        button.addEventListener('click', () => selectAnswer(answer, currentQuestion.correct, button));
                        answersContainer.appendChild(button);
                    });

                    if (answeredQuestions.has(currentQuestionIndex)) {
                        const selectedAnswerButton = answersContainer.querySelector(`.answer-btn[data-selected="true"]`);
                        
                        answersContainer.querySelectorAll('.answer-btn').forEach(btn => {
                            btn.disabled = true;
                            if (btn.textContent === currentQuestion.correct) {
                                btn.classList.add('correct');
                            }
                        });
                        
                        if (selectedAnswerButton && selectedAnswerButton.textContent === currentQuestion.correct) {
                            feedbackMessage.textContent = "Correct!";
                            feedbackMessage.style.color = "#10b981";
                        } else {
                            if (selectedAnswerButton) {
                                selectedAnswerButton.classList.add('incorrect');
                            }
                            feedbackMessage.textContent = "Incorrect. The correct answer is highlighted.";
                            feedbackMessage.style.color = "#ef4444";
                        }
                    }
                } else {
                    showResults();
                }
            }

            function selectAnswer(selectedAnswer, correctAnswer, button) {
                if (answeredQuestions.has(currentQuestionIndex)) return;

                const isCorrect = selectedAnswer === correctAnswer;
                answeredQuestions.add(currentQuestionIndex);
                button.setAttribute('data-selected', 'true');
                
                answersContainer.querySelectorAll('.answer-btn').forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });

                if (isCorrect) {
                    score++;
                    feedbackMessage.textContent = "Correct!";
                    feedbackMessage.style.color = "#10b981";
                } else {
                    button.classList.add('incorrect');
                    feedbackMessage.textContent = "Incorrect. The correct answer is highlighted.";
                    feedbackMessage.style.color = "#ef4444";
                }

                nextBtn.disabled = currentQuestionIndex === quizData.length - 1;
            }

            function nextQuestion() {
                if (currentQuestionIndex < quizData.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                } else {
                    showResults();
                }
            }

            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    loadQuestion();
                }
            }

            function showResults() {
                quizArea.classList.add('hidden');
                resultsArea.classList.remove('hidden');
                scoreDisplay.textContent = score;
                totalQuestions.textContent = quizData.length;
            }

            nextBtn.addEventListener('click', nextQuestion);
            prevBtn.addEventListener('click', prevQuestion);
            
            // Initialize the app by showing the first tab and loading the first quiz question
            showTab('dashboard');
            loadQuestion();
        });
    </script>
</body>
</html>
