<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EHR Medical Office Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }
        .app-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 900px;
            padding: 2rem;
        }
        .tab-btn {
            padding: 1rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: color 0.2s, background-color 0.2s;
            border-bottom: 2px solid transparent;
        }
        .tab-btn:hover {
            background-color: #f3f4f6;
        }
        .tab-btn.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        .tab-content {
            display: none;
            padding-top: 2rem;
        }
        .tab-content.active {
            display: block;
        }
        .card {
            background-color: #f9fafb;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .question-box {
            background-color: #f9fafb;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }
        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }
        .answer-btn {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background-color: white;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            text-align: left;
        }
        .answer-btn:hover {
            background-color: #e5e7eb;
        }
        .answer-btn.correct {
            background-color: #d1fae5;
            border-color: #10b981;
            font-weight: 600;
            pointer-events: none;
        }
        .answer-btn.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
            font-weight: 600;
            pointer-events: none;
        }
        .feedback {
            font-size: 1rem;
            font-weight: 500;
            margin-top: 1rem;
            min-height: 1.5rem;
        }
        .navigation-btns {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }
        button {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        #encoder-container {
            max-width: 800px;
            width: 100%;
            padding: 30px;
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #searchInput {
            flex-grow: 1;
            padding: 12px 18px;
            border: 1px solid #ccc;
            border-radius: 25px;
            font-size: 1em;
            outline: none;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        #searchButton {
            background-color: #2c3e50;
            color: #fff;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s, transform 0.2s;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            transition: background-color 0.3s;
        }
        .result-term {
            font-weight: bold;
            color: #555;
        }
        .result-code {
            font-family: 'Courier New', Courier, monospace;
            background-color: #eee;
            padding: 5px 10px;
            border-radius: 5px;
            color: #2c3e50;
        }
        .no-results {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 font-sans">

    <div class="app-container">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">EHR Medical Office Simulator</h1>

        <!-- Tab Buttons -->
        <div class="flex border-b-2 border-gray-200 mb-4">
            <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
            <button class="tab-btn" data-tab="coding">Medical Coding</button>
            <button class="tab-btn" data-tab="quiz">Quiz</button>
            <button class="tab-btn" data-tab="claims">Claims</button>
        </div>

        <!-- Tab Content -->
        <div id="dashboard" class="tab-content active">
            <h2 class="text-2xl font-bold mb-4">Welcome to the Dashboard</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-700">Today's Appointments</h3>
                    <p class="text-4xl font-bold text-green-500 mt-2">2</p>
                    <p class="text-sm text-gray-500">patients scheduled</p>
                </div>
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-700">Pending Tasks</h3>
                    <p class="text-4xl font-bold text-blue-500 mt-2">0</p>
                    <p class="text-sm text-gray-500">new assignments</p>
                </div>
                <div class="card">
                    <h3 class="text-lg font-semibold text-gray-700">Unscrubbed Claims</h3>
                    <p class="text-4xl font-bold text-red-500 mt-2">0</p>
                    <p class="text-sm text-gray-500">claims to review</p>
                </div>
            </div>
            <p class="mt-8 text-gray-600">Use the tabs above to begin practicing different tasks in a medical office, like coding, billing, and taking a quiz.</p>
        </div>

        <div id="coding" class="tab-content">
            <h2 class="text-2xl font-bold text-center mb-6">Medical Code Encoder</h2>
            <p class="text-gray-600 text-center mb-4">Search for a diagnosis or procedure to find its corresponding code. Practice identifying the right codes for clinical scenarios.</p>
            <div class="flex w-full gap-4">
                <input type="text" id="searchInput" class="flex-grow p-3 border border-gray-300 rounded-lg" placeholder="Enter a diagnosis or procedure...">
                <button id="searchButton" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Search</button>
            </div>
            <div id="results" class="mt-6">
                <!-- Results will be displayed here -->
            </div>
        </div>

        <div id="quiz" class="tab-content text-center">
            <h2 class="text-2xl font-bold mb-6">Medical Coding Quiz</h2>
            <div id="quiz-area">
                <div class="question-box">
                    <p class="question-text" id="question-text"></p>
                    <div id="answers-container"></div>
                </div>
                <div id="feedback-message" class="feedback"></div>
            </div>

            <div class="navigation-btns">
                <button id="prev-btn" disabled>Previous</button>
                <button id="next-btn" disabled>Next</button>
            </div>

            <div id="results-area" class="mt-8 hidden">
                <h3 class="text-xl font-bold mb-4">Quiz Complete!</h3>
                <p class="text-lg">You scored: <span id="score-display">0</span> / <span id="total-questions">0</span></p>
                <button class="mt-4" onclick="window.location.reload();">Retake Quiz</button>
            </div>
        </div>

        <div id="claims" class="tab-content text-center">
            <h2 class="text-2xl font-bold mb-4">Claims Scrubbing</h2>
            <p class="text-gray-600 mb-6">This section is for practicing how to review and "scrub" claims for errors before submitting them to an insurance company. 

[Image of medical billing and coding]
 </p>
            <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                Load New Claim
            </button>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Tab Switching Logic ---
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            function showTab(tabId) {
                tabButtons.forEach(button => {
                    button.classList.remove('active');
                });
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });

                document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active');
                document.getElementById(tabId).classList.add('active');
            }

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showTab(button.getAttribute('data-tab'));
                });
            });

            // --- Medical Code Encoder Logic ---
            const medicalCodes = [
                { term: "appendicitis", code: "K37" },
                { term: "fracture of ankle", code: "S82.84" },
                { term: "migraine with aura", code: "G43.109" },
                { term: "bacterial pneumonia", code: "J15.9" },
                { term: "type 2 diabetes mellitus", code: "E11.9" },
                { term: "sore throat", code: "J02.9" },
                { term: "chest pain", code: "R07.9" },
                { term: "influenza with pneumonia", code: "J10.0" },
                { term: "acute sinusitis", code: "J01.90" },
                { term: "urinary tract infection", code: "N39.0" },
                { term: "complete blood count", code: "85025" },
                { term: "x-ray of chest", code: "71045" },
                { term: "colonoscopy, diagnostic", code: "45378" },
                { term: "office visit, new patient, low complexity", code: "99202" },
                { term: "office visit, established patient, moderate complexity", code: "99214" }
            ];

            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const resultsContainer = document.getElementById('results');

            function performSearch() {
                const query = searchInput.value.toLowerCase().trim();
                resultsContainer.innerHTML = '';
                if (query === "") return;

                const filteredCodes = medicalCodes.filter(item => item.term.toLowerCase().includes(query));

                if (filteredCodes.length > 0) {
                    filteredCodes.forEach(item => {
                        const resultItem = document.createElement('div');
                        resultItem.classList.add('result-item');
                        resultItem.innerHTML = `<span class="result-term">${item.term}</span><span class="result-code">${item.code}</span>`;
                        resultsContainer.appendChild(resultItem);
                    });
                } else {
                    resultsContainer.innerHTML = `<p class="no-results">No codes found for "${query}". Try a different term.</p>`;
                }
            }

            if (searchButton) {
                searchButton.addEventListener('click', performSearch);
            }
            if (searchInput) {
                searchInput.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter') {
                        performSearch();
                    }
                });
            }

            // --- Quiz Logic ---
            const quizData = [
                // Medical Coding Quiz
                {
                    question: "A patient presents with a laceration on their left arm that requires simple repair. The physician closes the wound with sutures, and the total length of the repair is 4.5 cm. What is the correct CPT code for this procedure?",
                    answers: ["12032", "12002", "12034", "12001"],
                    correct: "12002",
                    rationale: "This is the correct code for a simple repair of a laceration of 2.6 cm to 7.5 cm on the scalp, neck, axillae, external genitalia, trunk and/or extremities."
                },
                {
                    question: "A 55-year-old male is diagnosed with essential hypertension, but has no other complications. Which of the following ICD-10-CM codes is most appropriate for this diagnosis?",
                    answers: ["I10", "I11.0", "I12.9", "I15.0"],
                    correct: "I10",
                    rationale: "This is the correct code for essential (primary) hypertension, which is a common and uncomplicated diagnosis."
                },
                {
                    question: "A patient receives a routine flu shot (influenza virus vaccine). What is the correct HCPCS Level II code for the vaccine product itself, not the administration?",
                    answers: ["90471", "G0008", "J3420", "G8411"],
                    correct: "G8411",
                    rationale: "This is the correct HCPCS code for the influenza virus vaccine (Fluarix Quadrivalent)."
                },
                {
                    question: "A patient is seen for a new patient office visit that involves a low complexity medical decision making and takes 20 minutes. The physician completes a comprehensive history and a comprehensive examination. What is the appropriate CPT code for this visit?",
                    answers: ["99213", "99202", "99203", "99204"],
                    correct: "99202",
                    rationale: "This code is for a new patient visit that is low complexity medical decision making and is based on time of 20 minutes."
                },
                {
                    question: "A patient with a history of heart failure with a known diagnosis of congestive heart failure is seen by a cardiologist. What is the correct ICD-10-CM code for the patient's diagnosis?",
                    answers: ["I50.9", "I50.20", "I50.30", "I50.84"],
                    correct: "I50.9",
                    rationale: "When the specific type of heart failure is not documented, the unspecified code is typically used."
                },
                {
                    question: "A patient has a complete blood count (CBC) with automated differential. What is the correct CPT code for this lab test?",
                    answers: ["85025", "85027", "85022", "85004"],
                    correct: "85025",
                    rationale: "This is the correct code for a complete blood count (CBC) with automated differential."
                },
                {
                    question: "A patient undergoes a magnetic resonance imaging (MRI) of the brain without contrast. What is the correct CPT code for this procedure?",
                    answers: ["70551", "70552", "70553", "70540"],
                    correct: "70551",
                    rationale: "This is the correct code for an MRI of the brain without contrast."
                },
                {
                    question: "A patient with a broken ankle is seen in the emergency room. The physician determines that the fracture is a displaced fracture of the lateral malleolus. What is the correct ICD-10-CM code for this diagnosis?",
                    answers: ["S82.69XA", "S82.62XA", "S82.61XA", "S82.51XA"],
                    correct: "S82.62XA",
                    rationale: "This is the correct code for a displaced fracture of the lateral malleolus of the left tibia, initial encounter for closed fracture."
                },
                {
                    question: "A patient receives an injection of a drug not otherwise specified. What is the most appropriate HCPCS Level II code for this injection administration, not the medication itself?",
                    answers: ["G0391", "J3490", "96372", "G0402"],
                    correct: "J3490",
                    rationale: "This is a correct HCPCS code for a drug not otherwise specified, which is used for the medication itself, not the administration."
                },
                {
                    question: "A patient has a complete, bilateral mammogram for breast cancer screening. What is the correct CPT code for this procedure?",
                    answers: ["77067", "77066", "77065", "77061"],
                    correct: "77067",
                    rationale: "This is the correct code for a screening mammogram, bilateral."
                },
                // Medical Office & EHR Quiz
                {
                    question: "During patient registration, which of the following is the most critical piece of information to verify for accurate billing?",
                    answers: ["The patient's preferred contact method.", "The patient's insurance policy number and effective date.", "The patient's emergency contact information.", "The patient's date of birth and social security number."],
                    correct: "The patient's insurance policy number and effective date.",
                    rationale: "Verifying the insurance policy number and its effective date is crucial for ensuring that the patient's services are covered and for accurate claims submission."
                },
                {
                    question: "Which of the following is a primary purpose of clinical charting in an EHR?",
                    answers: ["To create a record of patient visits for the front desk staff.", "To provide a financial record for billing and coding purposes.", "To serve as a legal document of the patient's medical history and treatment plan.", "To track a patient's exercise and dietary habits."],
                    correct: "To serve as a legal document of the patient's medical history and treatment plan.",
                    rationale: "Clinical charts are a legal document that provides a comprehensive record of the patient's medical history, diagnoses, and treatment plan."
                },
                {
                    question: "What does the abbreviation 'CPT' stand for in the context of medical coding?",
                    answers: ["Certified Patient Technician", "Current Patient Treatment", "Current Procedural Terminology", "Clinical Protocol Terminology"],
                    correct: "Current Procedural Terminology",
                    rationale: "CPT codes are a set of codes used to describe medical, surgical, and diagnostic services provided by physicians and other healthcare professionals."
                },
                {
                    question: "Which of the following is a key administrative task handled by the front office staff?",
                    answers: ["Performing diagnostic tests.", "Developing a patient's treatment plan.", "Scheduling patient appointments and managing the flow of the clinic.", "Prescribing medications."],
                    correct: "Scheduling patient appointments and managing the flow of the clinic.",
                    rationale: "Scheduling appointments and managing the flow of the clinic are core administrative responsibilities of the front office staff."
                },
                {
                    question: "According to HIPAA, which of the following is considered a 'covered entity'?",
                    answers: ["A patient's family member.", "A public library.", "A healthcare provider, such as a doctor's office or clinic.", "A non-medical retail store."],
                    correct: "A healthcare provider, such as a doctor's office or clinic.",
                    rationale: "A healthcare provider is considered a 'covered entity' under HIPAA because they handle protected health information (PHI)."
                },
                {
                    question: "What is the primary role of a medical biller?",
                    answers: ["To perform clinical examinations on patients.", "To assign diagnostic and procedural codes to patient encounters.", "To process and submit claims to insurance companies for reimbursement.", "To schedule appointments and manage the front desk."],
                    correct: "To process and submit claims to insurance companies for reimbursement.",
                    rationale: "The primary role of a medical biller is to handle the financial side of healthcare by processing and submitting claims to insurance companies."
                },
                {
                    question: "Which of the following would be an example of a HIPAA violation?",
                    answers: ["A nurse discusses a patient's diagnosis with a colleague who is also involved in the patient's care.", "A receptionist posts a photo of a patient's medical chart on social media.", "A patient requests and receives a copy of their own medical records.", "A doctor uses a patient's name and age for a case study with their permission."],
                    correct: "A receptionist posts a photo of a patient's medical chart on social media.",
                    rationale: "Sharing any patient information, especially on a public platform like social media, is a clear violation of HIPAA rules regarding the protection of protected health information (PHI)."
                }
            ];
            
            let currentQuestionIndex = 0;
            let score = 0;
            const answeredQuestions = new Set();
            
            const questionTextElement = document.getElementById('question-text');
            const answersContainer = document.getElementById('answers-container');
            const feedbackMessage = document.getElementById('feedback-message');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const quizArea = document.getElementById('quiz-area');
            const resultsArea = document.getElementById('results-area');
            const scoreDisplay = document.getElementById('score-display');
            const totalQuestions = document.getElementById('total-questions');
            
            function loadQuestion() {
                if (currentQuestionIndex < quizData.length) {
                    const currentQuestion = quizData[currentQuestionIndex];
                    questionTextElement.textContent = currentQuestion.question;
                    answersContainer.innerHTML = '';
                    feedbackMessage.textContent = '';
                    nextBtn.disabled = !answeredQuestions.has(currentQuestionIndex) && currentQuestionIndex < quizData.length - 1;
                    prevBtn.disabled = currentQuestionIndex === 0;

                    const allAnswers = [...currentQuestion.answers];

                    // Shuffle the answers
                    for (let i = allAnswers.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [allAnswers[i], allAnswers[j]] = [allAnswers[j], allAnswers[i]];
                    }

                    allAnswers.forEach(answer => {
                        const button = document.createElement('button');
                        button.textContent = answer;
                        button.classList.add('answer-btn');
                        button.addEventListener('click', () => selectAnswer(answer, currentQuestion.correct, button));
                        answersContainer.appendChild(button);
                    });

                    if (answeredQuestions.has(currentQuestionIndex)) {
                        const selectedAnswerButton = answersContainer.querySelector(`.answer-btn[data-selected="true"]`);
                        
                        answersContainer.querySelectorAll('.answer-btn').forEach(btn => {
                            btn.disabled = true;
                            if (btn.textContent === currentQuestion.correct) {
                                btn.classList.add('correct');
                            }
                        });
                        
                        if (selectedAnswerButton && selectedAnswerButton.textContent === currentQuestion.correct) {
                            feedbackMessage.textContent = "Correct!";
                            feedbackMessage.style.color = "#10b981";
                        } else {
                            if (selectedAnswerButton) {
                                selectedAnswerButton.classList.add('incorrect');
                            }
                            feedbackMessage.textContent = "Incorrect. The correct answer is highlighted.";
                            feedbackMessage.style.color = "#ef4444";
                        }
                    }
                } else {
                    showResults();
                }
            }

            function selectAnswer(selectedAnswer, correctAnswer, button) {
                if (answeredQuestions.has(currentQuestionIndex)) return;

                const isCorrect = selectedAnswer === correctAnswer;
                answeredQuestions.add(currentQuestionIndex);
                button.setAttribute('data-selected', 'true');
                
                answersContainer.querySelectorAll('.answer-btn').forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });

                if (isCorrect) {
                    score++;
                    feedbackMessage.textContent = "Correct!";
                    feedbackMessage.style.color = "#10b981";
                } else {
                    button.classList.add('incorrect');
                    feedbackMessage.textContent = "Incorrect. The correct answer is highlighted.";
                    feedbackMessage.style.color = "#ef4444";
                }

                nextBtn.disabled = currentQuestionIndex === quizData.length - 1;
            }

            function nextQuestion() {
                if (currentQuestionIndex < quizData.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                } else {
                    showResults();
                }
            }

            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    loadQuestion();
                }
            }

            function showResults() {
                quizArea.classList.add('hidden');
                resultsArea.classList.remove('hidden');
                scoreDisplay.textContent = score;
                totalQuestions.textContent = quizData.length;
            }

            nextBtn.addEventListener('click', nextQuestion);
            prevBtn.addEventListener('click', prevQuestion);
            
            // Initialize the app by showing the first tab and loading the first quiz question
            showTab('dashboard');
            loadQuestion();
        });
    </script>
</body>
</html>
